//
// DmxKridaParameters.h
//
#ifndef __DMX_KRIDA_PARAMTERS_H__
#define __DMX_KRIDA_PARAMTERS_H__

#include "Util/Misc.h"
#include "DmxParams/DmxDimmer.h"
#include "DmxParams/DmxEffectSpeedControl.h"

//==================================================================================================
// DmxKridaChannel
//==================================================================================================

struct PACKED DmxKridaChannel
{
    //----------------------------------------------------------------------------------------------
    // State
    //----------------------------------------------------------------------------------------------

    DmxDimmer              dimmer;
    DmxEffectSpeedControl  luminance;
};


//==================================================================================================
// DmxKridaDimmer
//==================================================================================================

struct PACKED DmxKridaDimmer
{
    //----------------------------------------------------------------------------------------------
    // State
    //----------------------------------------------------------------------------------------------

    DmxKridaChannel channels[4];

    //----------------------------------------------------------------------------------------------
    // Accessing
    //----------------------------------------------------------------------------------------------

    const DmxKridaChannel& channel(int i) const
    {
        return channels[i];
    }
};


//==================================================================================================
// DmxKridaParameters
//==================================================================================================

struct DmxKridaParameters
{
    //----------------------------------------------------------------------------------------------
    // State
    //----------------------------------------------------------------------------------------------
protected:

    DmxKridaDimmer* _rgDimmers;
    int             _dimmerCount;

    //----------------------------------------------------------------------------------------------
    // Construction
    //----------------------------------------------------------------------------------------------
public:

    DmxKridaParameters(void* pv, int dimmerCount)
    {
        _rgDimmers = reinterpret_cast<DmxKridaDimmer*>(pv);
        _dimmerCount = dimmerCount;
    }

    //----------------------------------------------------------------------------------------------
    // Accessing
    //----------------------------------------------------------------------------------------------
public:

    int dimmerCount() const
    {
        return _dimmerCount;
    }

    const DmxKridaDimmer& dimmer(int i) const
    {
        return _rgDimmers[i];
    }
};

#endif
